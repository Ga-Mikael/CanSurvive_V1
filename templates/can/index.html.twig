{% extends 'base.html.twig' %}

{% block title %}Stock
{% endblock %}

{% block body %}
	<div class="text-center">
		<h1>Stock</h1>
	</div>

	<div class="text-center">
		<p>Stock actuel
			{{canStock}}/{{bunker.stockCapacity}}</p>
			
		<p class="bg-secondary text-primary">
			Conserve(s) périmée(s)
		</p>
		 
		
	</div>

	<div class="container-fluid pt-5">
		<div data-bs-spy="scroll" data-bs-target="#navbar-example2" data-bs-root-margin="0px 0px -40%" data-bs-smooth-scroll="true" class="scrollspy-example bg-body-tertiary border border-secondary p-2 rounded-0 w-25 mx-auto">
			{% for can in cans %}
				<a class="mt-1 btn btn-primary text-secondary d-flex py-0" href="{{ path('app_can_show', {'id': can.id}) }}">
					<div class="container-fluid ">
						{% if "now"|date("Y-m-d") >= can.ExpirationDate|date("Y-m-d")  %}
						{% set Expired = true %}
							<div class="d-flex justify-content-between bg-secondary text-primary">
								<p>
									{{ can.name }}
								</p>
								<p>
									{{can.ExpirationDate|date("Y-m-d")}}
								</p>
								<p>
									{{ can.barCode }}
								</p>
							{% elseif "now"|date("Y-m-d") < can.ExpirationDate|date("Y-m-d") %}
								<div class="d-flex justify-content-between">
									<p>
										{{ can.name }}
									</p>
									<p>
										{{can.ExpirationDate|date("Y-m-d")}}
									</p>
									<p>
										{{ can.barCode }}
									</p>
								{% endif %}
							</div>
						</div>
					</a>
				{% else %}

					<div colspan="5">Aucune conserve dans votre stock</div>

				{% endfor %}
			</div>
		</div>
	</div>
	<div class="text-center">
		<a class="mt-3 btn btn-primary border border-secondary text-secondary rounded-0" href="{{ path('app_can_new') }}">Ajouter</a>
	</div>
{% endblock %}
